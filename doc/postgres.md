# postgres tuning

*shared_buffers** - 1/4 от памяти
*work_mem* - количество доступной оперативной памяти (после того, как из общего объема вычли
память, требуемую для других приложений, и shared_buffers ) делится на
максимальное число одновременных запросов умноженное на среднее чис-
ло операций в запросе, которые требуют памяти.

Объём памяти задаётся параметром work_mem в файле postgresql.conf.
Единица измерения параметра - 1 кБ. Значение по умолчанию - 1024. В
качестве начального значения для параметра можете взять 2–4% доступ-
ной памяти. Для веб-приложений обычно устанавливают низкие значения
work_mem , так как запросов обычно много, но они простые, обычно хва-
тает от 512 до 2048 КБ. С другой стороны, приложения для поддержки
принятия решений с сотнями строк в каждом запросе и десятками мил-
лионов столбцов в таблицах фактов часто требуют work_mem порядка 500
МБ. Для баз данных, которые используются и так, и так, этот параметр
можно устанавливать для каждого запроса индивидуально, используя на-
стройки сессии.

`cat var/lib/postgresql/data/postgresql.conf`

